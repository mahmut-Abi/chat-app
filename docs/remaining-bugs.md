# 剩余 Bug 修复清单

## 已完成 ✅

1. ✅ 搜索对话失效 - 已修复
2. ✅ DeepSeek API 支持 - 已添加
3. ✅ 去掉背景模糊功能 - 已移除
4. ✅ Markdown 代码美化 - 已完成
5. ✅ 对话背景 20% 透明度 - 已实现
6. ✅ 设置 container 增加透明度和宽度 - 已完成
7. ✅ 大模型回答不自动滚动 - 已优化
8. ✅ 头像挪到对白上面 - 已完成
9. ✅ 大模型头像后显示模型名称 - 已实现
10. ✅ 关闭 markdown 渲染失效 - 已修复
11. ✅ 通过总结第一次会话生成会话名称 - 已实现
12. ✅ 对话界面选择模型默认值 - 已修复
13. ✅ 程序提升小版本 - 已升至 1.2.0+3
14. ✅ 设置模型管理中刷新按钮 - 已存在

## 待处理 (按优先级)

### 高优先级 - MCP 功能完善

#### 1. MCP 基础功能
- [ ] MCP 健康检查功能
- [ ] MCP SSE 协议支持
- [ ] MCP 查询工具功能
- [ ] MCP 配置持久化到 Hive
- [ ] 关闭 MCP 失败问题
- [ ] MCP 添加激活状态管理

#### 2. MCP 仓库功能
- [ ] 支持 MCP 仓库浏览
- [ ] 支持下载 MCP Server
- [ ] 支持一键启动 MCP Server

### 高优先级 - Agent 功能完善

#### 3. Agent 基础功能
- [ ] 在设置-高级中添加 Agent 管理入口
- [ ] Agent 配置持久化到 Hive
- [ ] Agent 添加激活状态管理
- [ ] 完善 Agent 功能（功能缺失严重）

#### 4. 对话中使用工具
- [ ] 在对话中能使用 Prompt
- [ ] 在对话中能使用 MCP
- [ ] 在对话中能使用 Agent

### 高优先级 - 图片和文件支持

#### 5. 图片功能
- [ ] 对话支持图片上传
- [ ] 对话中的图片可以点开放大
- [ ] 图片可以保存

#### 6. 文件功能
- [ ] 对话支持文件上传

### 中优先级 - 数据和配置

#### 7. 数据持久化
- [ ] 确保所有数据存储在 Hive 中
- [ ] MCP 配置持久化验证
- [ ] Agent 配置持久化验证

#### 8. Token 统计
- [ ] Token 统计功能修复
- [ ] Token 统计持久化

#### 9. API 配置
- [ ] 去除 API 激活状态
- [ ] API 提供商支持更多常见平台（智谱、月之暗面、百川等）

### 中优先级 - 其他功能

#### 10. 会话管理
- [ ] 分组失效问题修复
- [ ] 去除会话分享功能

#### 11. 模型管理
- [ ] 模型管理提供详细信息（上下文长度、功能、定价等）
- [ ] 确保模型参数生效

#### 12. 导出功能
- [ ] 完善导出数据功能
- [ ] 修复导出 PDF 乱码问题

### 低优先级

#### 13. 其他优化
- [ ] 从会话打开 Drawer 输入法跳出问题
- [ ] 日志更详细
- [ ] 输出大模型思考过程（o1 系列）

## 修复策略

### 第一批：MCP 和 Agent 核心功能
1. MCP 配置持久化
2. Agent 配置持久化
3. 添加激活状态管理
4. 在设置中添加 Agent 管理入口

### 第二批：对话中使用工具
5. 实现 Prompt 快捷调用
6. 实现 MCP 工具调用接口
7. 实现 Agent 工具调用接口

### 第三批：图片和文件支持
8. 图片上传功能
9. 图片预览和保存
10. 文件上传功能

### 第四批：数据和配置优化
11. Token 统计修复和持久化
12. 去除 API 激活状态
13. 添加更多 API 提供商

### 第五批：其他功能完善
14. 导出功能修复
15. 日志增强
16. 其他 UI 优化

---

**创建时间**: 2025-01-17  
**状态**: 进行中
