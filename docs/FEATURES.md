# 功能特性详解

本文档详细介绍 Flutter Chat App 的所有功能特性。

## 目录

- [智能对话](#智能对话)
- [Agent 系统](#agent-系统)
- [MCP 集成](#mcp-集成)
- [会话管理](#会话管理)
- [数据分析](#数据分析)
- [个性化设置](#个性化设置)

---

## 智能对话

### 多模型支持

支持所有兼容 OpenAI API 的服务：

| 提供商 | 支持模型 | 特色 |
|--------|---------|------|
| OpenAI | GPT-4, GPT-3.5 | 官方 API |
| DeepSeek | DeepSeek-Chat | 中文优化 |
| Claude | Claude-3 系列 | Anthropic |
| Ollama | 本地模型 | 隐私保护 |
| 自定义 | 兼容 API | 灵活接入 |

### 流式响应

- **实时输出** - 打字机效果
- **可中断** - 随时停止生成
- **性能优化** - 流畅体验

### 多模态输入

- **文本** - 基础对话
- **图片** - 上传图片分析（需模型支持）
- **文件** - 文档理解（规划中）

### 内容渲染

#### Markdown 支持
- 标题、列表、引用
- 粗体、斜体、删除线
- 链接、图片
- 代码块（语法高亮）
- 表格

#### LaTeX 公式
- **行内公式**: `$E=mc^2$`
- **块级公式**: 
  ```
  $$
  \int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}
  $$
  ```

#### 代码高亮
- 支持 100+ 编程语言
- 一键复制代码
- 行号显示

---

## Agent 系统

### 内置 Agent

#### 🤖 通用助手
- **定位**: 日常使用的多面手
- **工具**: 计算器 + 搜索
- **适用**: 
  - 日常问答
  - 简单计算
  - 信息查询

#### 🔢 数学专家
- **定位**: 数学计算和解题
- **工具**: 计算器
- **适用**:
  - 数学作业
  - 公式计算
  - 方程求解
- **特色**: 详细的解题步骤

#### 🔍 研究助手
- **定位**: 学术研究和资料整理
- **工具**: 搜索 + 文件操作
- **适用**:
  - 文献检索
  - 资料整理
  - 数据分析

#### 📁 文件管理员
- **定位**: 文件和目录操作
- **工具**: 文件操作
- **适用**:
  - 读写文件
  - 目录管理
  - 批量操作

#### 💻 编程助手
- **定位**: 代码开发和技术支持
- **工具**: 文件操作 + 搜索
- **适用**:
  - 代码编写
  - Bug 调试
  - 技术查询
- **特色**: 代码规范建议

### 自定义 Agent

**创建流程**:
1. 设置 → Agent → 创建
2. 配置名称和描述
3. 编写系统提示词
4. 选择可用工具
5. 保存并使用

**示例配置**:
```yaml
名称: 翻译专家
描述: 专业的多语言翻译助手
系统提示词: |
  你是一位专业的翻译专家，精通：
  - 中英互译
  - 术语准确
  - 语境理解
  请提供准确、流畅的翻译。
工具: [搜索工具]
```

### Agent 工具

#### 计算器
- 基本运算: `+, -, *, /`
- 高级函数: `sin, cos, log, sqrt`
- 表达式: `(2+3)*4`

#### 搜索
- 网络搜索
- 实时信息
- 多来源聚合

#### 文件操作
- **读取**: 读取文件内容
- **写入**: 创建或修改文件
- **列出**: 列出目录内容
- **信息**: 查看文件属性

---

## MCP 集成

### 什么是 MCP？

Model Context Protocol（模型上下文协议）是一个开放标准，允许 AI 应用与外部工具和数据源通信。

### 连接模式

#### HTTP 模式
- **用途**: RESTful API 服务器
- **示例**: 天气 API, GitHub API
- **配置**:
  ```yaml
  端点: https://api.example.com
  Headers:
    Authorization: Bearer TOKEN
  ```

#### Stdio 模式
- **用途**: 本地进程通信
- **示例**: Node.js, Python 服务器
- **配置**:
  ```yaml
  命令: /usr/bin/node
  参数: ["server.js"]
  环境变量:
    NODE_ENV: production
  ```

### 快速开始

应用已预置快速开始配置：

1. **查看配置**: 设置 → MCP → 快速开始服务器
2. **启动服务**: 运行提供的测试代码
3. **连接使用**: 启用配置并连接

详见 [MCP 快速开始指南](mcp-quick-start.md)

### 实际应用

#### 天气查询
```yaml
服务器: 天气 API
工具: get_weather, get_forecast
用例: "查询北京的天气"
```

#### GitHub 集成
```yaml
服务器: GitHub API
工具: create_issue, search_repos
用例: "在仓库创建 Issue"
```

#### 数据库查询
```yaml
服务器: 数据库服务
工具: query, schema
用例: "查询用户数据"
```

---

## 会话管理

### 智能分组

**8 种颜色标识**:
- 🔴 红色 - 重要对话
- 🟠 橙色 - 工作相关
- 🟡 黄色 - 学习资料
- 🟢 绿色 - 日常聊天
- 🔵 蓝色 - 项目讨论
- 🟣 紫色 - 创意想法
- 🟤 棕色 - 归档内容
- ⚫ 灰色 - 临时对话

**操作**:
- 创建分组
- 重命名分组
- 移动对话
- 删除分组

### 标签系统

**功能**:
- 多标签支持
- 标签筛选
- 标签搜索
- 批量管理

**用例**:
```
对话: "Python 开发问题"
标签: #编程 #Python #Bug
```

### 对话操作

**基础操作**:
- 📌 置顶 - 固定在顶部
- ✏️ 重命名 - 修改标题
- 🏷️ 标签 - 添加标签
- 📁 分组 - 移动到分组

**高级操作**:
- 📤 导出 - Markdown/PDF
- 🔄 同步 - 云端备份（规划中）
- 🗑️ 删除 - 删除对话

### 搜索功能

**支持**:
- 全文搜索
- 标签筛选
- 分组筛选
- 日期范围

**搜索语法**:
```
关键词 tag:编程 group:工作 date:2024-01
```

---

## 数据分析

### Token 统计

**实时显示**:
- 当前对话 Token 数
- 历史累计使用量
- 模型分布统计

**详细分析**:
- 按对话统计
- 按模型统计
- 按时间统计

### 成本分析

**支持功能**:
- 实时成本计算
- 历史开销统计
- 模型成本对比
- 预算管理（规划中）

**价格配置**:
```yaml
GPT-4: $0.03/1K tokens
GPT-3.5: $0.002/1K tokens
DeepSeek: $0.001/1K tokens
```

### 数据导出

**支持格式**:
- **Markdown** - 保留格式
- **PDF** - 分享打印
- **JSON** - 数据备份

**导出选项**:
- 单个对话
- 批量导出
- 包含图片
- 自定义样式

---

## 个性化设置

### 主题系统

**主题模式**:
- ☀️ 亮色模式
- 🌙 暗色模式
- 🔄 跟随系统

**主题颜色**:
- 蓝色（默认）
- 紫色
- 粉色
- 橙色
- 绿色
- 青色

### 背景设置

**背景类型**:
- **纯色** - 简洁干净
- **渐变** - 5 种预设渐变
- **图片** - 自定义背景图

**效果**:
- 毛玻璃效果
- 透明度调节
- 模糊程度

### 字体设置

**字号调节**:
- 小号: 12px
- 中号: 14px（默认）
- 大号: 16px
- 特大: 18px

### 快捷键

**常用快捷键**:
- `Cmd/Ctrl + N` - 新建对话
- `Cmd/Ctrl + K` - 搜索对话
- `Cmd/Ctrl + ,` - 打开设置
- `Cmd/Ctrl + W` - 关闭当前
- `Enter` - 发送消息
- `Shift + Enter` - 换行

---

## 高级功能

### 提示词模板

**内置模板**:
- 代码审查
- 文本翻译
- 内容总结
- 创意写作

**自定义模板**:
```yaml
标题: 代码审查
分类: 编程
变量: code, language
模板: |
  请审查以下 {{language}} 代码：
  
  {{code}}
  
  重点关注代码质量、性能和安全性。
```

### 批量操作

**支持功能**:
- 批量导出对话
- 批量删除对话
- 批量添加标签
- 批量移动分组

### 数据管理

**导入导出**:
- 导出全部数据
- 导入备份数据
- 迁移到新设备

**清理工具**:
- 清除缓存
- 删除旧对话
- 重置设置

---

## 平台特性

### Web 版
- ✅ 完整功能支持
- ✅ 响应式设计
- ✅ PWA 支持
- ✅ 离线使用

### 移动版（iOS/Android）
- ✅ 原生体验
- ✅ 手势操作
- ✅ 推送通知（规划中）
- ✅ 分享集成

### 桌面版（macOS/Windows/Linux）
- ✅ 系统集成
- ✅ 快捷键支持
- ✅ 系统托盘
- ✅ 全局热键（规划中）

---

## 安全与隐私

### 数据安全
- **本地存储** - 数据保存在本地
- **加密存储** - API Key 安全加密
- **无追踪** - 不收集用户数据

### API 安全
- **安全传输** - HTTPS 加密
- **代理支持** - 保护隐私
- **密钥管理** - 安全存储

### 开源透明
- **完全开源** - 代码公开
- **社区审核** - 透明开发
- **自主部署** - 完全控制

---

## 性能优化

### 加载优化
- 懒加载
- 虚拟滚动
- 图片压缩
- 缓存策略

### 体验优化
- 流畅动画
- 即时响应
- 错误恢复
- 离线支持

---

## 未来规划

### 短期（1-3 个月）
- [ ] 语音输入支持
- [ ] 更多内置 Agent
- [ ] 云端同步
- [ ] 团队协作

### 中期（3-6 个月）
- [ ] 插件系统
- [ ] 移动端完善
- [ ] 多语言支持
- [ ] AI 绘画集成

### 长期（6-12 个月）
- [ ] 企业版功能
- [ ] 私有化部署
- [ ] API 开放平台
- [ ] 生态系统建设

---

## 技术亮点

### 架构设计
- **Feature-First** - 功能模块化
- **Clean Architecture** - 清晰分层
- **Provider Pattern** - 状态管理
- **Dependency Injection** - 依赖注入

### 代码质量
- **类型安全** - 完整类型定义
- **单元测试** - 高测试覆盖
- **代码规范** - 严格 Lint
- **文档完善** - 详细注释

### 开发体验
- **热重载** - 快速开发
- **代码生成** - 减少重复
- **错误处理** - 优雅降级
- **日志系统** - 便于调试

---

**更多信息**:
- [用户指南](agent-user-guide.md)
- [MCP 快速
