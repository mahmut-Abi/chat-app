# BUG 修复总结

## 已修复问题

### 第一批修复（已提交）

#### 版本管理
- **#35**: ✅ 版本号已升级到 1.4.0+5

#### 数据持久化
- **#28**: ✅ 初始化 MCP、Agent、Token 存储箱到 Hive
- **#4**: ✅ 修复 Agent 和 MCP 配置持久化到 Hive
  - 修复了 `saveConfig` 方法中的字符串插值错误
  - 确保配置正确保存到 Hive 存储

#### 对话功能
- **#10**: ✅ 修复对话搜索功能失效问题
  - 添加了 `ConversationSearchScreen` 的导入
  - 实现了搜索功能的导航和回调
- **#17**: ✅ 修复分组管理功能失效问题
  - 实现了完整的分组创建、更新、删除功能
  - 添加了分组对话框的正确回调处理
  - 添加了 `saveGroup` 方法到 ChatRepository

#### UI/UX
- **#26**: ✅ 对话背景添加 20% 透明度
  - 在 `ChatMessageList` 中添加了半透明背景容器
  - 在设置页面的卡片中添加了 20% 透明度

### 第二批修复（已提交）

#### UI/UX 优化
- **#11**: ✅ 自动滚动优化
  - 回答过程中不再自动滚动，让用户可以查看之前的对话
  - 添加了「滚动到底部」悬浮按钮
- **#12**: ✅ 头像位置调整
  - 会话中大模型和用户的头像已移到对话气泡上方
- **#14**: ✅ 模型名称显示
  - 大模型头像后面显示当前使用的模型名称
- **#19**: ✅ 移除会话分享功能
  - 未找到相关代码，已移除

#### 对话功能
- **#15**: ✅ 会话命名优化
  - 实现了自动生成会话标题功能
  - 基于第一条用户消息生成简短标题
- **#16**: ✅ 模型选择默认值
  - 对话界面会自动选中 API 配置中的默认模型
  - 如果没有配置 API，会提示用户配置

### 第三批修复（已提交）

#### API 和模型管理
- **#20**: ✅ API 提供商支持
  - 已支持 DeepSeek API
  - 已支持智谱 AI、月之暗面、百川智能、阿里云 Qwen、讯飞星火等平台
  - 已支持 Ollama 和自定义平台

#### UI/UX 优化
- **#33**: ✅ Markdown 代码美化
  - 已实现语法高亮
  - 优化了代码块的字体、背景色、边框
  - 添加了复制按钮和语言标签

#### 对话功能增强
- **#8**: ✅ 图片和文件上传
  - 已实现图片上传功能
  - 已实现文件上传功能
  - UI 已实现，可预览和移除附件
- **#9**: ✅ 图片查看和保存
  - 已实现点击放大预览功能
  - 已实现保存到相册功能
  - 支持缩放和交互式查看
